<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>LegalRisk AI</title>
  <script src="https://cdn.tailwindcss.com "></script>
  <script src="https://unpkg.com/react @18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom @18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/ @babel/standalone/babel.min.js"></script>

  <!-- Polyfill -->
  <script>
    if (typeof TextEncoder === 'undefined') {
      document.write('<script src="https://polyfill.io/v3/polyfill.min.js?features=TextEncoder%2CTextDecoder "><\/script>')
    }
  </script>

  <!-- PWA –º–µ—Ç–∞—Ç–µ–≥–∏ -->
<link rel="manifest" href="/legalrisk-ai-pwa/manifest.json">
<link rel="apple-touch-icon" href="/legalrisk-ai-pwa/icon-192.png">
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <meta name="theme-color" content="#6366F1" />
  <meta name="description" content="AI-–∞–Ω–∞–ª–∏–∑ –¥–æ–≥–æ–≤–æ—Ä–æ–≤ –Ω–∞ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ —Ä–∏—Å–∫–∏" />
</head>
<body class="bg-gray-50 text-gray-900 min-h-screen flex flex-col">
  <header class="bg-white shadow-sm border-b border-gray-200 py-4 px-6 flex justify-between items-center">
    <h1 class="text-xl font-bold text-indigo-600">LegalRisk AI</h1>
    <span class="text-xs bg-indigo-100 text-indigo-700 px-2 py-1 rounded-full">MVP</span>
  </header>

  <main id="root" class="flex-grow container mx-auto p-4 max-w-lg"></main>

  <footer class="py-4 bg-white border-t border-gray-200 text-center text-sm text-gray-500">
    ¬© {{ new Date().getFullYear() }} LegalRisk AI ‚Äî MVP –ü—Ä–æ—Ç–æ—Ç–∏–ø
  </footer>

  <!-- React App -->
  <script type="text/babel">
    const { useState } = React;

    function App() {
      const [screen, setScreen] = useState('login');
      const [email, setEmail] = useState('');
      const [password, setPassword] = useState('');
      const [selectedTemplate, setSelectedTemplate] = useState(null);
      const [analysisResult, setAnalysisResult] = useState(null);
      const [loading, setLoading] = useState(false);

      const templates = [
        { id: 'rent', name: '–î–æ–≥–æ–≤–æ—Ä –∞—Ä–µ–Ω–¥—ã' },
        { id: 'supply', name: '–î–æ–≥–æ–≤–æ—Ä –ø–æ—Å—Ç–∞–≤–∫–∏' },
        { id: 'contractor', name: '–î–æ–≥–æ–≤–æ—Ä –ø–æ–¥—Ä—è–¥–∞' },
      ];

      const mockAnalysis = {
        differences: [
          { section: '–ü—É–Ω–∫—Ç 3.1', status: '–ò–∑–º–µ–Ω–µ–Ω–æ', description: '–°—É–º–º–∞ –∏–∑–º–µ–Ω–µ–Ω–∞ —Å 100 —Ç—ã—Å. –¥–æ 150 —Ç—ã—Å.' },
          { section: '–ü—É–Ω–∫—Ç 4.5', status: '–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç', description: '–ù–µ—Ç —É—Å–ª–æ–≤–∏—è –æ —Ñ–æ—Ä—Å-–º–∞–∂–æ—Ä–∞—Ö' },
          { section: '–ü—É–Ω–∫—Ç 7.2', status: '–î–æ–±–∞–≤–ª–µ–Ω–æ', description: '–î–æ–±–∞–≤–ª–µ–Ω –ø—É–Ω–∫—Ç –æ–± –∞—Ä–±–∏—Ç—Ä–∞–∂–µ' },
        ],
        risks: [
          {
            title: '–í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫',
            description: '–í –¥–æ–≥–æ–≤–æ—Ä–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —É—Å–ª–æ–≤–∏–µ –æ —Ñ–æ—Ä—Å-–º–∞–∂–æ—Ä–Ω—ã—Ö –æ–±—Å—Ç–æ—è—Ç–µ–ª—å—Å—Ç–≤–∞—Ö.',
            impact: '–†–∏—Å–∫ –Ω–µ–≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤ –±–µ–∑ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –æ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏',
            recommendation: '–î–æ–±–∞–≤—å—Ç–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫—É –æ —Ñ–æ—Ä—Å-–º–∞–∂–æ—Ä–µ.'
          },
          {
            title: '–°—Ä–µ–¥–Ω–∏–π —Ä–∏—Å–∫',
            description: '–ò–∑–º–µ–Ω–µ–Ω–∞ —Å—É–º–º–∞ –æ–ø–ª–∞—Ç—ã –±–µ–∑ —É—Ç–æ—á–Ω–µ–Ω–∏—è –ø–æ—Ä—è–¥–∫–∞ —Ä–∞—Å—á–µ—Ç–æ–≤.',
            impact: '–ù–µ—è—Å–Ω–æ—Å—Ç—å –ø—Ä–∏ —Ä–∞—Å—á—ë—Ç–∞—Ö –º–µ–∂–¥—É —Å—Ç–æ—Ä–æ–Ω–∞–º–∏',
            recommendation: '–£—Ç–æ—á–Ω–∏—Ç–µ —Å–ø–æ—Å–æ–± –∏ –≥—Ä–∞—Ñ–∏–∫ –æ–ø–ª–∞—Ç—ã.'
          },
        ]
      };

      return (
        <div>
          {/* –®–∞–≥ 1: –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è */}
          {screen === 'login' && (
            <div className="bg-white shadow rounded-lg p-6 space-y-4">
              <h2 className="text-xl font-bold text-center mb-4">–í—Ö–æ–¥</h2>
              <input
                placeholder="Email"
                value={email}
                onChange={(e) => setEmail(e.target.value)}
                className="w-full border border-gray-300 rounded-md p-3 mb-4"
              />
              <input
                placeholder="–ü–∞—Ä–æ–ª—å"
                value={password}
                onChange={(e) => setPassword(e.target.value)}
                type="password"
                className="w-full border border-gray-300 rounded-md p-3 mb-4"
              />
              <button onClick={() => setScreen('upload')} className="w-full bg-indigo-600 hover:bg-indigo-700 text-white p-3 rounded-md">
                –í–æ–π—Ç–∏
              </button>
            </div>
          )}

          {/* –®–∞–≥ 2: –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–≥–æ–≤–æ—Ä–∞ */}
          {screen === 'upload' && (
            <div className="bg-white shadow rounded-lg p-6 space-y-4">
              <h2 className="text-xl font-bold text-center mb-4">–ó–∞–≥—Ä—É–∑–∏—Ç–µ –¥–æ–≥–æ–≤–æ—Ä</h2>
              <p className="text-center text-gray-600 mb-6">–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã: PDF, DOCX, TXT</p>

              <div onClick={() => setScreen('templates')}
                   className="border-dashed border-2 border-indigo-500 p-8 text-center rounded-lg mb-4 cursor-pointer hover:bg-indigo-50 transition-colors">
                <p className="text-indigo-600 font-medium">–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª</p>
                <p className="text-sm text-gray-500 mt-2">PDF, DOCX, TXT –¥–æ 20 –ú–ë</p>
              </div>

              <button onClick={() => alert('–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ')}
                      className="w-full border border-gray-300 rounded-md p-3 text-center text-gray-600">
                –°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å —Å –∫–∞–º–µ—Ä—ã
              </button>
            </div>
          )}

          {/* –®–∞–≥ 3: –í—ã–±–æ—Ä —à–∞–±–ª–æ–Ω–∞ */}
          {screen === 'templates' && (
            <div className="bg-white shadow rounded-lg p-6 space-y-3">
              <h2 className="text-xl font-bold mb-4">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –¥–æ–≥–æ–≤–æ—Ä–∞</h2>

              {templates.map((item) => (
                <div key={item.id}
                     onClick={() => {
                       setSelectedTemplate(item);
                       setLoading(true);
                       setTimeout(() => {
                         setAnalysisResult(mockAnalysis);
                         setLoading(false);
                         setScreen('analysis');
                       }, 1500);
                     }}
                     className={`p-4 border rounded-md cursor-pointer ${
                       selectedTemplate?.id === item.id ? 'border-indigo-600 bg-indigo-50' : 'border-gray-300'
                     }`}>
                  <h3>{item.name}</h3>
                </div>
              ))}
            </div>
          )}

          {/* –®–∞–≥ 4: –†–µ–∑—É–ª—å—Ç–∞—Ç –∞–Ω–∞–ª–∏–∑–∞ */}
          {screen === 'analysis' && analysisResult && (
            <div className="bg-white shadow rounded-lg p-6 space-y-6">
              <h2 className="text-xl font-bold">–†–µ–∑—É–ª—å—Ç–∞—Ç –∞–Ω–∞–ª–∏–∑–∞</h2>

              {/* –û—Ç–ª–∏—á–∏—è */}
              <div>
                <h3 className="text-lg font-semibold mb-2">üîç –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –æ—Ç–ª–∏—á–∏—è:</h3>
                {analysisResult.differences.map((diff, idx) => (
                  <div key={idx} className="p-4 bg-gray-100 rounded-md mb-3">
                    <strong>{diff.section}</strong> ‚Äî{' '}
                    <span className={
                      diff.status === '–ò–∑–º–µ–Ω–µ–Ω–æ' ? 'text-yellow-600' :
                      diff.status === '–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç' ? 'text-red-600' :
                      'text-green-600'
                    }>
                      {diff.status}
                    </span>
                    <p className="mt-1 text-sm text-gray-600">{diff.description}</p>
                  </div>
                ))}
              </div>

              {/* –†–∏—Å–∫–∏ */}
              <div>
                <h3 className="text-lg font-semibold mb-2">‚ö†Ô∏è –Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ —Ä–∏—Å–∫–∏:</h3>
                {analysisResult.risks.map((risk, idx) => (
                  <div key={idx} className="p-4 bg-red-50 rounded-md border-l-4 border-red-500 mb-4">
                    <h4 className="font-semibold text-red-800">{risk.title}</h4>
                    <p className="mt-1 text-gray-700">{risk.description}</p>
                    <p className="mt-2 text-sm italic text-gray-500">–í–ª–∏—è–Ω–∏–µ: {risk.impact}</p>
                    <p className="mt-2 text-sm text-green-600">–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: {risk.recommendation}</p>
                  </div>
                ))}
              </div>

              {/* –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π */}
              <div className="flex gap-4 mt-6">
                <button onClick={() => setScreen('upload')} className="flex-1 py-3 bg-gray-200 rounded-md hover:bg-gray-300">
                  –ù–∞–∑–∞–¥
                </button>
                <button onClick={() => alert('PDF —Å–∫–æ—Ä–æ –¥–æ—Å—Ç—É–ø–µ–Ω')} className="flex-1 py-3 bg-indigo-600 text-white rounded-md hover:bg-indigo-700">
                  –°–∫–∞—á–∞—Ç—å –æ—Ç—á–µ—Ç (PDF)
                </button>
              </div>
            </div>
          )}

          {/* –ê–Ω–∏–º–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ */}
          {loading && (
            <div className="fixed inset-0 bg-white/80 flex items-center justify-center z-50">
              <div className="text-center">
                <div className="inline-block animate-spin w-12 h-12 border-4 border-indigo-600 border-t-transparent rounded-full"></div>
                <p className="mt-4 text-gray-700">–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –¥–æ–≥–æ–≤–æ—Ä...</p>
              </div>
            </div>
          )}
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<App />);
  </script>
</body>
</html>
